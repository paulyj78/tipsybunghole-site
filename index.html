<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Tipsy Bunghole</title>
  <style>
    html, body {
      overflow-x: hidden;
      background-color: #1e1e1e;
      color: #f5f5f5;
      font-family: Georgia, serif;
      text-align: center;
      padding: 20px;
    }
    a {
      color: #ffb347;
      text-decoration: none;
      font-weight: bold;
    }
    a:hover {
      text-decoration: underline;
    }
    button {
      padding: 10px 20px;
      background-color: #ffb347;
      border: none;
      font-weight: bold;
      cursor: pointer;
      border-radius: 20px;
      box-shadow: 0 3px 6px rgba(255, 179, 71, 0.6);
      transition: background-color 0.3s ease, transform 0.2s ease;
      font-family: 'Comic Sans MS', cursive, sans-serif;
      letter-spacing: 1.2px;
      user-select: none;
    }
    button:hover {
      background-color: #e6a82a;
      transform: scale(1.1) rotate(-2deg);
    }
    img {
      border-radius: 8px;
    }
    input, textarea {
      padding: 8px;
      width: 80%;
      margin: 10px 0;
      border-radius: 4px;
      border: 1px solid #444;
      background-color: #2a2a2a;
      color: #f5f5f5;
      font-size: 1em;
    }
    #bungholeGallery img {
      max-width: 200px;
      margin: 10px;
      border-radius: 8px;
      box-shadow: 0 0 8px #ffb347aa;
      cursor: pointer;
    }
    .scrolling-banner {
      white-space: nowrap;
      background-color: transparent;
      color: #fff;
      font-weight: bold;
      padding: 10px 0;
    }
    .scrolling-text {
      display: inline-block;
      padding-left: 100%;
      animation: scroll-left 12s linear infinite;
    }
    @keyframes scroll-left {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }
    .upload-btn, .delete-btn {
      margin: 10px;
      border-radius: 30px;
      font-family: 'Comic Sans MS', cursive, sans-serif;
    }
    .guestbook-entry {
      border: 1px dashed #555;
      border-radius: 8px;
      padding: 10px;
      margin: 10px auto;
      width: 80%;
      background-color: #2a2a2a;
    }
  </style>
</head>
<body>

  <div class="scrolling-banner">
    <div class="scrolling-text">
      ğŸ‘ Voted BEST Bunghole in North Tonawanda NY 2025 ğŸ‘
    </div>
  </div>

  <img src="logo.png" alt="Drunk Tipsy Bunghole Logo" style="width:150px; margin:20px auto;" />

  <h1>ğŸ¥ƒ Welcome to The Tipsy Bunghole ğŸ¥ƒ</h1>
  <p>Where we make pour decisions and the jokes are low like our standards.</p>

  <h2>ğŸ¥ƒ Drink Menu</h2>
  <ul>
    <li>The Bung'd Up Old Fashioned</li>
    <li>Peachy Rim Job Runner</li>
    <li>The Barrel Probe</li>
    <li>Neat & Naughty</li>
    <li>The Oak Spanker</li>
    <li>Anything YOU bring</li>
  </ul>

  <section id="teaser">
    <p><strong>Do you want to see my bunghole?</strong></p>
    <p><a href="#" id="showBungholeLink">ğŸ‘‰ Yes, Show Me the Goods</a></p>
  </section>

  <div id="bungholeGallery" style="display:none;">
    <h2>ğŸ“¸ Bunghole Gallery</h2>
    <div id="photoGallery" style="display:flex; flex-wrap:wrap; justify-content:center;"></div>
    <input type="file" id="fileInput" accept="image/*" />
    <button class="upload-btn" id="uploadBtn">Upload Your Contribution</button>
    <p id="uploadStatus"></p>
  </div>

  <h2>ğŸ» Our Story</h2>
  <p>Legend has it The Tipsy Bunghole was born after one too many bourbons and a lack of room.</p>

  <h2>ğŸ“† Make a Reservation</h2>
  <form onsubmit="sendReservation(); return false;">
    <input type="text" id="name" placeholder="Your Name" required /><br />
    <input type="text" id="date" placeholder="Preferred Date/Time" required /><br />
    <textarea id="notes" placeholder="Anything we should know?"></textarea><br />
    <button type="submit">Reserve My Bunghole</button>
    <p id="confirmation"></p>
  </form>

  <h2>ğŸ“ Contact Us</h2>
  <p>Email: <a href="mailto:thetipsybunghole@gmail.com">thetipsybunghole@gmail.com</a></p>

  <section id="guestbook-callout" style="margin-top: 60px;">
    <p>
      Want to leave your mark on The Tipsy Bunghole? <a href="#" id="showGuestbookBtn">ğŸ“– Sign the guestbook</a> â€” but no Sharpies, please.
    </p>
  </section>

  <!-- Hidden Guestbook Form + Viewer -->
  <section id="guestbook" style="display:none; margin-top:40px;">
    <h2>ğŸ–Šï¸ The Guestbook</h2>
    <form onsubmit="submitGuestbook(); return false;">
      <input type="text" id="alias" placeholder="Your Alias (or stripper name)" required /><br />
      <input type="text" id="favDrink" placeholder="Favorite Drink" required /><br />
      <textarea id="message" placeholder="Leave a cheeky message..." required></textarea><br />
      <button type="submit">Sign It!</button>
    </form>
    <div id="entries" style="margin-top: 30px;"></div>
  </section>

  <footer style="margin-top: 60px; font-size: 0.9em;">
    <p>&copy; 2025 The Tipsy Bunghole â€” No refunds, no regrets.</p>
  </footer>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAdHvy_zumpvAObyIF_o-nVcJwhH2M_q_Q",
      authDomain: "tipsy-bunghole-photos.firebaseapp.com",
      projectId: "tipsy-bunghole-photos",
      storageBucket: "tipsy-bunghole-photos.appspot.com",
      messagingSenderId: "2480051479",
      appId: "1:2480051479:web:c89f9cf8f4b3df8cdf1352",
    };

    firebase.initializeApp(firebaseConfig);
    const storage = firebase.storage();
    const db = firebase.firestore();

    // Show gallery
    document.getElementById("showBungholeLink").addEventListener("click", (e) => {
      e.preventDefault();
      document.getElementById("bungholeGallery").style.display = "block";
      loadPhotos();
    });

    // Show guestbook
    document.getElementById("showGuestbookBtn").addEventListener("click", (e) => {
      e.preventDefault();
      document.getElementById("guestbook").style.display = "block";
      loadGuestbook();
    });

    // Upload photo
    document.getElementById("uploadBtn").addEventListener("click", async () => {
      const file = document.getElementById("fileInput").files[0];
      const status = document.getElementById("uploadStatus");
      if (!file) {
        status.innerText = "Pick a file, ya lush!";
        return;
      }
      const fileName = Date.now() + "_" + file.name;
      const ref = storage.ref(fileName);
      try {
        await ref.put(file);
        await db.collection("photos").add({ fileName, timestamp: firebase.firestore.FieldValue.serverTimestamp() });
        status.innerText = "Uploaded! Cheers!";
        document.getElementById("fileInput").value = "";
        loadPhotos();
      } catch (err) {
        status.innerText = "Upload failed!";
        console.error(err);
      }
    });

    // Load photos
    async function loadPhotos() {
      const gallery = document.getElementById("photoGallery");
      gallery.innerHTML = "";
      const snapshot = await db.collection("photos").orderBy("timestamp", "desc").get();
      snapshot.forEach(async (doc) => {
        const fileName = doc.data().fileName;
        try {
          const url = await storage.ref(fileName).getDownloadURL();
          const img = document.createElement("img");
          img.src = url;
          gallery.appendChild(img);
        } catch (err) {
          console.error("Image load failed", err);
        }
      });
    }

    // Reservation confirm
    function sendReservation() {
      const name = document.getElementById("name").value;
      const date = document.getElementById("date").value;
      document.getElementById("confirmation").innerText = `Thanks ${name}! Your bunghole is reserved for ${date}. Our drunk intern will text you shortly.`;
    }

    // Guestbook submission
    async function submitGuestbook() {
      const alias = document.getElementById("alias").value;
      const drink = document.getElementById("favDrink").value;
      const message = document.getElementById("message").value;
      await db.collection("guestbook").add({
        alias,
        drink,
        message,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      });
      document.getElementById("alias").value = "";
      document.getElementById("favDrink").value = "";
      document.getElementById("message").value = "";
      loadGuestbook();
    }

    // Load guestbook entries
    async function loadGuestbook() {
      const entries = document.getElementById("entries");
      entries.innerHTML = "";
      const snapshot = await db.collection("guestbook").orderBy("timestamp", "desc").get();
      snapshot.forEach(doc => {
        const data = doc.data();
        const div = document.createElement("div");
        div.classList.add("guestbook-entry");
        div.innerHTML = `<strong>${data.alias}</strong> sipping <em>${data.drink}</em><br/>"${data.message}"`;
        entries.appendChild(div);
      });
    }
  </script>
</body>
</html>
