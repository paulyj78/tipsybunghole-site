<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Tipsy Bunghole</title>
  <style>
    html, body {
      overflow-x: hidden;
      font-family: Georgia, serif;
      background-color: #1e1e1e;
      color: #f5f5f5;
      text-align: center;
      padding: 20px;
    }
    a {
      color: #ffb347;
      text-decoration: none;
      font-weight: bold;
    }
    a:hover {
      text-decoration: underline;
    }
    img {
      border-radius: 8px;
    }
    section {
      margin-top: 40px;
    }
    ul {
      list-style-type: none;
      padding: 0;
      margin: 0;
    }
    li {
      margin: 10px 0;
    }
    input, textarea {
      padding: 8px;
      width: 80%;
      margin: 10px 0;
      border-radius: 4px;
      border: 1px solid #444;
      background-color: #2a2a2a;
      color: #f5f5f5;
    }
    input:focus, textarea:focus {
      outline: none;
      border-color: #ffb347;
      background-color: #3b3b3b;
    }
    button {
      padding: 10px 20px;
      background-color: #ffb347;
      border: none;
      font-weight: bold;
      cursor: pointer;
      border-radius: 20px;
      font-family: 'Comic Sans MS', cursive;
    }

    .scrolling-banner {
      width: 100%;
      overflow: hidden;
      white-space: nowrap;
      background-color: transparent;
      color: #fff;
      font-weight: bold;
      padding: 10px 0;
    }
    .scrolling-text {
      display: inline-block;
      padding-left: 100%;
      animation: scroll-left 12s linear infinite;
    }
    @keyframes scroll-left {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    .logo {
      width: 150px;
      margin: 0 auto 20px;
      animation: roll 8s infinite ease-in-out;
    }

    @keyframes roll {
      0% { transform: rotate(0); }
      50% { transform: rotate(360deg); }
      100% { transform: rotate(0); }
    }

    #bungholeGallery {
      display: none;
      margin-top: 30px;
    }
    #bungholeGallery img {
      max-width: 200px;
      margin: 10px;
      border-radius: 8px;
      box-shadow: 0 0 10px #ffb347aa;
    }

    .upload-btn, .delete-btn {
      padding: 10px 20px;
      border-radius: 20px;
      margin: 10px;
    }

    #guestbookForm, #guestbookEntries {
      display: none;
      margin-top: 30px;
    }

    .entry {
      background-color: #2c2c2c;
      padding: 15px;
      border-radius: 10px;
      margin: 10px auto;
      max-width: 500px;
      box-shadow: 0 0 8px #ffb347aa;
    }
  </style>
</head>
<body>

  <div class="scrolling-banner">
    <div class="scrolling-text">üëç Voted BEST Bunghole in North Tonawanda NY 2025 üëç</div>
  </div>

  <img src="logo.png" alt="Tipsy Bunghole Logo" class="logo" />
  <h1>ü•É Welcome to The Tipsy Bunghole ü•É</h1>
  <p>Where we make pour decisions and the jokes are low like our standards.</p>

  <section>
    <h2>ü•É Drink Menu</h2>
    <ul>
      <li>The Bung'd Up Old Fashioned</li>
      <li>Peachy Rim Job Runner</li>
      <li>The Barrel Probe</li>
      <li>Neat & Naughty</li>
      <li>The Oak Spanker</li>
      <li>Anything YOU bring</li>
    </ul>
  </section>

  <section id="teaser">
    <p><strong>Do you want to see my bunghole?</strong></p>
    <p><a href="#" id="showBungholeLink">üëâ Yes, Show Me the Goods</a></p>
  </section>

  <div id="bungholeGallery">
    <h2>üì∏ Bunghole Gallery</h2>
    <div id="photoGallery"></div>
    <input type="file" id="fileInput" accept="image/*" />
    <button class="upload-btn" id="uploadBtn">Upload Your Contribution</button>
    <button class="delete-btn" id="deleteBtn">Delete This Junk</button>
    <p id="uploadStatus"></p>
  </div>

  <section id="about">
    <h2>üçª Our Story</h2>
    <p>Born after one too many bourbons and a lack of room, The Tipsy Bunghole is a haven for lovers of brown liquor, bad jokes, and mediocre snacks.</p>
  </section>

  <section id="reservation">
    <h2>üìÜ Make a Reservation</h2>
    <form onsubmit="sendReservation(); return false;">
      <input type="text" id="name" placeholder="Your Name" required><br>
      <input type="text" id="date" placeholder="Preferred Date/Time" required><br>
      <textarea id="notes" placeholder="Anything we should know? Raunchy preferences welcome."></textarea><br>
      <button type="submit">Reserve My Bunghole</button>
    </form>
    <p id="confirmation"></p>
  </section>

  <section id="guestbook-callout">
    <p>Want to leave your mark on The Tipsy Bunghole? <a href="#" id="openGuestbook">üìñ Sign the guestbook</a> ‚Äî but no Sharpies, please.</p>
  </section>

  <section id="guestbookForm">
    <h2>üìñ Guestbook</h2>
    <form onsubmit="submitGuestbook(); return false;">
      <input type="text" id="guestAlias" placeholder="Alias name" required><br>
      <input type="text" id="guestDrink" placeholder="Favorite drink" required><br>
      <textarea id="guestMessage" placeholder="Leave a cheeky message..." required></textarea><br>
      <button type="submit">Sign It!</button>
    </form>
  </section>

  <section id="guestbookEntries">
    <h3>üçπ What Our Boozy Guests Are Saying</h3>
    <div id="entriesContainer"></div>
  </section>

  <footer style="margin-top: 60px;">
    <p>&copy; 2025 The Tipsy Bunghole ‚Äî No refunds, no regrets.</p>
  </footer>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAdHvy_zumpvAObyIF_o-nVcJwhH2M_q_Q",
      authDomain: "tipsy-bunghole-photos.firebaseapp.com",
      projectId: "tipsy-bunghole-photos",
      storageBucket: "tipsy-bunghole-photos.appspot.com",
      messagingSenderId: "2480051479",
      appId: "1:2480051479:web:c89f9cf8f4b3df8cdf1352",
    };
    firebase.initializeApp(firebaseConfig);
    const storage = firebase.storage();
    const firestore = firebase.firestore();

    // Photo Gallery
    document.getElementById("showBungholeLink").onclick = async (e) => {
      e.preventDefault();
      const gallery = document.getElementById("bungholeGallery");
      gallery.style.display = gallery.style.display === "none" ? "block" : "none";
      if (gallery.style.display === "block") loadPhotos();
    };

    async function loadPhotos() {
      const container = document.getElementById("photoGallery");
      container.innerHTML = "";
      const snapshot = await firestore.collection("photos").orderBy("timestamp", "desc").get();
      for (const doc of snapshot.docs) {
        const data = doc.data();
        const url = await storage.ref(data.fileName).getDownloadURL();
        const img = document.createElement("img");
        img.src = url;
        container.appendChild(img);
      }
    }

    document.getElementById("uploadBtn").onclick = async () => {
      const file = document.getElementById("fileInput").files[0];
      const status = document.getElementById("uploadStatus");
      if (!file) return status.innerText = "Pick a file first, ya lush!";
      const fileName = Date.now() + "_" + file.name;
      try {
        await storage.ref(fileName).put(file);
        await firestore.collection("photos").add({ fileName, timestamp: firebase.firestore.FieldValue.serverTimestamp() });
        status.innerText = "Uploaded! Cheers üçª";
        loadPhotos();
      } catch (e) {
        console.error(e);
        status.innerText = "Something went sideways.";
      }
    };

    document.getElementById("deleteBtn").onclick = async () => {
      if (!confirm("Really delete everything?")) return;
      const status = document.getElementById("uploadStatus");
      const snapshot = await firestore.collection("photos").get();
      for (const doc of snapshot.docs) {
        const data = doc.data();
        await storage.ref(data.fileName).delete();
        await doc.ref.delete();
      }
      status.innerText = "Wiped clean!";
      loadPhotos();
    };

    // Guestbook
    document.getElementById("openGuestbook").onclick = (e) => {
      e.preventDefault();
      document.getElementById("guestbookForm").style.display = "block";
      document.getElementById("guestbookEntries").style.display = "block";
      loadGuestbook();
    };

    async function submitGuestbook() {
      const alias = document.getElementById("guestAlias").value;
      const drink = document.getElementById("guestDrink").value;
      const message = document.getElementById("guestMessage").value;
      await firestore.collection("guestbook").add({
        alias,
        drink,
        message,
        timestamp: firebase.firestore.FieldValue.serverTimestamp(),
      });
      document.getElementById("guestAlias").value = "";
      document.getElementById("guestDrink").value = "";
      document.getElementById("guestMessage").value = "";
      loadGuestbook();
    }

    async function loadGuestbook() {
      const container = document.getElementById("entriesContainer");
      container.innerHTML = "";
      const snapshot = await firestore.collection("guestbook").orderBy("timestamp", "desc").get();
      snapshot.forEach(doc => {
        const data = doc.data();
        const div = document.createElement("div");
        div.className = "entry";
        div.innerHTML = `<strong>${data.alias}</strong> sipping on <em>${data.drink}</em><br><q>${data.message}</q>`;
        container.appendChild(div);
      });
    }

    // Reservation Confirmation
    function sendReservation() {
      const name = document.getElementById("name").value;
      const date = document.getElementById("date").value;
      document.getElementById("confirmation").innerText = `Thanks ${name}! Your bunghole has been tentatively reserved for ${date}.`;
    }
  </script>
</body>
</html>
