<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8" />
 <meta name="viewport" content="width=device-width, initial-scale=1" />
 <title>The Tipsy Bunghole</title>
 <style>
   body {
     margin: 0;
     font-family: Georgia, serif;
     background-color: #1e1e1e;
     color: #f5f5f5;
     text-align: center;
   }

   .sidebar {
     position: fixed;
     top: 0;
     left: 0;
     width: 200px;
     height: 100%;
     background-color: #2a2a2a;
     border-right: 2px solid #ffb347;
     padding: 20px 10px;
     box-shadow: 4px 0 10px rgba(0, 0, 0, 0.3);
     transition: transform 0.3s ease-in-out;
   }

   .sidebar h3 {
     color: #ffb347;
     font-family: 'Comic Sans MS', cursive, sans-serif;
     margin-bottom: 20px;
   }

   .sidebar ul {
     list-style: none;
     padding: 0;
   }

   .sidebar ul li {
     margin: 15px 0;
   }

   .sidebar ul li a {
     color: #fff;
     text-decoration: none;
     font-family: 'Comic Sans MS', cursive, sans-serif;
     font-weight: bold;
     transition: color 0.3s ease;
   }

   .sidebar ul li a:hover {
     color: #ffd369;
   }

   .menu-toggle {
     display: none;
     position: fixed;
     top: 15px;
     left: 15px;
     background-color: #ffb347;
     border: none;
     padding: 10px;
     border-radius: 5px;
     z-index: 101;
   }

   .menu-toggle span {
     font-size: 24px;
     color: #000;
   }

   @media (max-width: 768px) {
     .sidebar {
       transform: translateX(-100%);
     }
     .sidebar.active {
       transform: translateX(0);
     }
     body {
       margin-left: 0;
     }
     .menu-toggle {
       display: block;
     }
   }

   .content {
     margin-left: 200px;
     padding: 20px;
   }

   @media (max-width: 768px) {
     .content {
       margin-left: 0;
     }
   }
   .scrolling-banner {
     width: 100%;
     overflow: hidden;
     white-space: nowrap;
     background-color: transparent;
     color: #fff;
     font-weight: bold;
     padding: 10px 0;
     position: relative;
   }

   .scrolling-text {
     display: inline-block;
     padding-left: 100%;
     animation: scroll-left 12s linear infinite;
   }

   @keyframes scroll-left {
     0% { transform: translateX(0); }
     100% { transform: translateX(-100%); }
   }

   .logo {
     width: 150px;
     margin: 0 auto 20px;
     position: relative;
     animation: stagger-roll-away 8s ease-in-out infinite;
   }

   @keyframes stagger-roll-away {
     0%, 10% {
       transform: translateX(0) rotate(0deg);
       opacity: 1;
     }
     20%, 30% {
       transform: translateX(-10px) rotate(-5deg);
     }
     40%, 50% {
       transform: translateX(10px) rotate(5deg);
     }
     60% {
       transform: translateX(0) rotate(0deg);
       opacity: 1;
     }
     70% {
       opacity: 1;
     }
     80% {
       transform: translateX(120vw) rotate(720deg);
       opacity: 0;
     }
     90%, 100% {
       transform: translateX(0) rotate(0deg);
       opacity: 1;
     }
   }
 </style>
</head>
<body>

 <button class="menu-toggle" onclick="toggleSidebar()">
   <span>‚ò∞</span>
 </button>

 <div class="sidebar" id="sidebar">
   <h3>üçæ The Menu</h3>
   <ul>
     <li><a href="bottles.html">üìö Bottle List</a></li>
     <li><a href="kills.html">‚ò†Ô∏è Bottle Kills</a></li>
   </ul>
 </div>

 <div class="scrolling-banner">
   <div class="scrolling-text">
     üëç Voted BEST Bunghole in North Tonawanda NY 2025 üëç
   </div>
 </div>

 <div class="content">
   <img src="logo.png" alt="Drunk Tipsy Bunghole Logo" class="logo" />
   <h1>ü•É Welcome to The Tipsy Bunghole ü•É</h1>
   <p>Where we make pour decisions and the jokes are low like our standards.</p>
   <section id="menu">
     <h2>ü•É Drink Menu</h2>
     <ul>
       <li>The Bung'd Up Old Fashioned</li>
       <li>Peachy Rim Job Runner</li>
       <li>The Barrel Probe</li>
       <li>Neat & Naughty</li>
       <li>The Oak Spanker</li>
       <li>Anything YOU bring</li>
     </ul>
   </section>

   <section id="teaser">
     <p><strong>Do you want to see my bunghole?</strong></p>
     <p><a href="#" id="showBungholeLink">üëâ Yes, Show Me the Goods</a></p>
   </section>

   <div id="bungholeGallery">
     <h2>üì∏ Bunghole Gallery</h2>
     <div id="photoGallery" style="justify-content:center; display:flex; flex-wrap:wrap; gap:10px;">
       <!-- Uploaded photos will appear here -->
     </div>
     <input type="file" id="fileInput" accept="image/*" />
     <button class="upload-btn" id="uploadBtn">Upload Your Contribution</button>
     <p id="uploadStatus" style="color:#ffb347; font-weight:bold; margin-top:10px;"></p>
   </div>

   <section id="about">
     <h2>üçª Our Story</h2>
     <p>Legend has it The Tipsy Bunghole was born after one too many bourbons and a lack of space.</p>
     <p>Since then, it's been a haven for lovers of brown liquor, bad jokes, and mediocre snacks.</p>
   </section>

   <section id="reservation">
     <h2>üìÜ Make a Reservation</h2>
     <form onsubmit="sendReservation(); return false;">
       <input type="text" id="name" placeholder="Your Name" required /><br />
       <input type="text" id="date" placeholder="Preferred Date/Time" required /><br />
       <textarea id="notes" placeholder="Anything we should know? Raunchy preferences welcome."></textarea><br />
       <button type="submit" class="black-font-button">Reserve My Bunghole</button>
     </form>
     <p id="confirmation" style="margin-top: 10px;"></p>
   </section>

   <section id="contact">
     <h2>üìû Contact Us</h2>
     <p>Email: <a href="mailto:thetipsybunghole@gmail.com">thetipsybunghole@gmail.com</a></p>
     <p>Carrier pigeon or smoke signals also accepted.</p>
   </section>

   <section id="guestbook-callout" style="margin-top: 60px;">
     <p>
       Want to leave your mark on The Tipsy Bunghole? <a href="guestbook.html">üìñ Sign the guestbook</a> ‚Äî but no Sharpies, please.
     </p>
   </section>

   <footer style="margin-top: 60px; font-size: 0.9em;">
     <p>&copy; 2025 The Tipsy Bunghole ‚Äî No refunds, no regrets.</p>
   </footer>
   <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
   <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
   <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

   <script>
     // Firebase Config
     const firebaseConfig = {
       apiKey: "AIzaSyAdHvy_zumpvAObyIF_o-nVcJwhH2M_q_Q",
       authDomain: "tipsy-bunghole-photos.firebaseapp.com",
       projectId: "tipsy-bunghole-photos",
       storageBucket: "tipsy-bunghole-photos.appspot.com",
       messagingSenderId: "2480051479",
       appId: "1:2480051479:web:c89f9cf8f4b3df8cdf1352",
     };

     // Initialize Firebase
     firebase.initializeApp(firebaseConfig);
     const storage = firebase.storage();
     const firestore = firebase.firestore();

     // Elements
     const showBungholeLink = document.getElementById("showBungholeLink");
     const bungholeGallery = document.getElementById("bungholeGallery");
     const photoGallery = document.getElementById("photoGallery");
     const fileInput = document.getElementById("fileInput");
     const uploadBtn = document.getElementById("uploadBtn");
     const uploadStatus = document.getElementById("uploadStatus");

     // Toggle gallery view
     showBungholeLink.addEventListener("click", (e) => {
       e.preventDefault();
       if (
         bungholeGallery.style.display === "none" ||
         bungholeGallery.style.display === ""
       ) {
         bungholeGallery.style.display = "block";
         loadPhotos();
       } else {
         bungholeGallery.style.display = "none";
       }
     });

     // Load images
     async function loadPhotos() {
       photoGallery.innerHTML = "";
       uploadStatus.innerText = "";
       const snapshot = await firestore
         .collection("photos")
         .orderBy("timestamp", "desc")
         .get();
       snapshot.forEach(async (doc) => {
         const data = doc.data();
         try {
           const url = await storage.ref(data.fileName).getDownloadURL();
           const img = document.createElement("img");
           img.src = url;
           img.alt = "User uploaded bourbon photo";
           photoGallery.appendChild(img);
         } catch (err) {
           console.error("Image load failed", err);
         }
       });
     }

     // Upload image
     uploadBtn.addEventListener("click", async () => {
       const file = fileInput.files[0];
       if (!file) {
         uploadStatus.innerText = "Pick a file first, ya lush!";
         return;
       }
       uploadStatus.innerText = "Uploading your masterpiece...";
       const fileName = Date.now() + "_" + file.name;
       const storageRef = storage.ref(fileName);
       try {
         await storageRef.put(file);
         await firestore.collection("photos").add({
           fileName,
           timestamp: firebase.firestore.FieldValue.serverTimestamp(),
         });
         uploadStatus.innerText = "Uploaded! Cheers for your contribution üçª";
         fileInput.value = "";
         loadPhotos();
       } catch (error) {
         console.error(error);
         uploadStatus.innerText = "Oops! Something went sideways during upload.";
       }
     });

     // Reservation confirmation message
     function sendReservation() {
       const name = document.getElementById("name").value;
       const date = document.getElementById("date").value;
       const confirmation = document.getElementById("confirmation");
       confirmation.innerText = `Thanks ${name}! Your bunghole has been tentatively reserved for ${date}. Expect a text from our drunk intern shortly.`;
     }

     // Toggle sidebar on mobile
     document.getElementById("menuToggle").addEventListener("click", () => {
       const sidebar = document.querySelector(".sidebar");
       sidebar.classList.toggle("active");
     });
   </script>
 </body>
</html>
