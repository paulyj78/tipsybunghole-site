<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Tipsy Bunghole Bottles</title>
  <style>
    /* Basic styles to set up the page layout */
    body {
      font-family: "Courier New", monospace;
      background: #f0f0f0;
      padding: 0;
      margin: 0;
    }

    header {
      background: #333;
      color: white;
      text-align: center;
      padding: 1rem;
      font-size: 1.5rem;
      font-weight: bold;
    }

    .bottle-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 15px;
      padding: 1rem;
    }

    .pagination-controls {
      text-align: center;
      margin: 20px 0;
    }
    .pagination-controls button {
      padding: 10px 20px;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <header>The Tipsy Bunghole Bottle Inventory</header>
  
  <div class="bottle-grid" id="bottleGrid"></div>
  
  <div class="pagination-controls">
    <button id="prevBtn" onclick="previousPage()">Previous</button>
    <span id="pageNumbers">Page 1 of 1</span>
    <button id="nextBtn" onclick="nextPage()">Next</button>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const app = initializeApp({
      apiKey: "your-api-key",
      authDomain: "your-auth-domain",
      projectId: "your-project-id",
      storageBucket: "your-storage-bucket",
      messagingSenderId: "your-messaging-sender-id",
      appId: "your-app-id"
    });

    const db = getFirestore(app);
    const bottlesRef = collection(db, "bottles");

    const allBottles = [];
    let filteredBottles = [];
    let currentPage = 1;
    const itemsPerPage = 10;

    onSnapshot(bottlesRef, snap => {
      allBottles.length = 0;
      snap.forEach(ds => allBottles.push({ id: ds.id, ...ds.data() }));
      renderPage();
    });

    function renderPage() {
      filteredBottles = allBottles.slice();  // Filter logic can go here if needed

      const totalPages = Math.ceil(filteredBottles.length / itemsPerPage);
      const start = (currentPage - 1) * itemsPerPage;
      const pageItems = filteredBottles.slice(start, start + itemsPerPage);
      renderBottles(pageItems);
      updatePaginationControls(totalPages);
    }

    function renderBottles(arr) {
      const bottleGrid = document.getElementById("bottleGrid");
      bottleGrid.innerHTML = ""; // Clear current grid
      arr.forEach(bottle => {
        const card = document.createElement("div");
        card.className = "bottle-card";
        card.innerHTML = `
          <h3>${bottle.name}</h3>
          <p>Distillery: ${bottle.distillery}</p>
          <p>Age: ${bottle.age}</p>
          <p>Proof: ${bottle.proof}</p>
        `;
        bottleGrid.appendChild(card);
      });
    }

    function updatePaginationControls(totalPages) {
      document.getElementById("prevBtn").disabled = currentPage <= 1;
      document.getElementById("nextBtn").disabled = currentPage >= totalPages;
      document.getElementById("pageNumbers").textContent = `Page ${currentPage} of ${totalPages}`;
    }

    function nextPage() {
      const totalPages = Math.ceil(filteredBottles.length / itemsPerPage);
      if (currentPage < totalPages) {
        currentPage++;
        renderPage();
      }
    }

    function previousPage() {
      if (currentPage > 1) {
        currentPage--;
        renderPage();
      }
    }
  </script>
</body>
</html>
