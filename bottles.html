<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8" />
 <meta name="viewport" content="width=device-width, initial-scale=1" />
 <title>The Tipsy Bunghole Bottles</title>
 <style>
   html, body {
     height: 100%;
     margin: 0;
     padding: 0;
     font-family: "Courier New", monospace;
     background-color: #1b1b1b;
     background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/5/54/Chalkboard_texture.jpg/1280px-Chalkboard_texture.jpg');
     background-size: cover;
     background-repeat: no-repeat;
     background-position: center;
     background-attachment: fixed;
     min-height: 100vh;
     color: white;
   }

   header {
     background: rgba(0, 0, 0, 0.7);
     color: white;
     padding: 1rem;
     font-size: 1.5rem;
     font-weight: bold;
     display: flex;
     flex-wrap: wrap;
     justify-content: center;
     align-items: center;
     gap: 10px;
     text-align: center;
     user-select: none;
   }

   .return-button,
   #rouletteBtn {
     background: #a6794a;
     color: white;
     border: none;
     cursor: pointer;
     border-radius: 4px;
     padding: 10px 14px;
     font-family: "Courier New", monospace;
     font-weight: bold;
     text-shadow: 0 0 2px #000;
     transition: background-color 0.3s ease;
   }

   .return-button { font-size: 0.9rem; }
   #rouletteBtn { font-size: 0.75rem; }

   #rouletteBtn:hover, .return-button:hover {
     background: #8b6434;
   }

   header div {
     flex-grow: 1;
     text-align: center;
   }

   @media (max-width: 600px) {
     header { flex-direction: column; }
     .return-button, #rouletteBtn {
       width: 100%;
       text-align: center;
     }
     header div {
       order: -1;
       width: 100%;
     }
   }

   .filters {
     display: flex;
     flex-wrap: wrap;
     gap: 10px;
     justify-content: center;
     align-items: center;
     padding: 10px;
     background: rgba(0, 0, 0, 0.6);
     font-size: 0.9rem;
     margin-top: 10px;
     width: 100%;
     user-select: none;
   }

   .filters label,
   .filters input[type="text"] {
     margin: 0 5px;
     color: white;
   }

   .filters input[type="text"] {
     padding: 5px;
     border-radius: 4px;
     border: 1px solid #a6794a;
     background-color: rgba(255,255,255,0.1);
     color: white;
     font-family: "Courier New", monospace;
   }

   .filters input[type="text"]::placeholder {
     color: #d0c5a6;
   }

   /* COLLAPSIBLE FORM */
   .collapsible {
     background: #a6794a;
     color: white;
     cursor: pointer;
     padding: 10px;
     width: 100%;
     border: none;
     text-align: left;
     font-size: 1.1em;
     margin-top: 10px;
     font-family: "Courier New", monospace;
     user-select: none;
     text-shadow: 0 0 3px #000;
     transition: background-color 0.3s ease;
   }

   .collapsible:hover { background: #8b6434; }

   .content {
     display: none;
     background: #2a2a2a;
     padding: 10px;
     border: 1px solid #a6794a;
     border-radius: 6px;
     color: white;
     font-family: "Courier New", monospace;
   }

   form input, form button {
     margin: 5px;
     font-size: 1em;
     font-family: "Courier New", monospace;
     padding: 6px 10px;
     border-radius: 4px;
     border: 1px solid #a6794a;
     background-color: rgba(255,255,255,0.1);
     color: white;
     box-sizing: border-box;
     transition: background-color 0.3s ease;
   }

   form input:focus {
     outline: none;
     background-color: rgba(255,255,255,0.25);
   }

   form input[type="file"] {
     padding: 3px;
   }

   form button {
     background: #a6794a;
     color: white;
     border: none;
     cursor: pointer;
     font-weight: bold;
     transition: background-color 0.3s ease;
   }

   form button:hover {
     background: #8b6434;
   }

   /* LIST STYLE LAYOUT */
   .bottle-grid {
     display: flex;
     flex-direction: column;
     gap: 15px;
     padding: 1rem;
     max-width: 1000px;
     margin: auto;
   }

   .bottle-card {
     display: flex;
     gap: 15px;
     align-items: center;
     background-color: rgba(0, 0, 0, 0.6);
     border: 2px solid #a6794a;
     border-radius: 8px;
     padding: 10px;
     color: white;
     box-shadow:
       0 0 10px 1px rgba(255, 166, 90, 0.7),
       inset 0 0 15px 2px rgba(255, 255, 255, 0.1);
     transition: transform 0.3s ease, box-shadow 0.3s ease;
     cursor: pointer;
   }

   .bottle-card:hover {
     transform: scale(1.02);
     box-shadow:
       0 0 25px 4px rgba(255, 166, 90, 1),
       inset 0 0 20px 4px rgba(255, 255, 255, 0.25);
     z-index: 5;
   }

   .bottle-card img,
   .placeholder-svg {
     width: 80px;
     height: 80px;
     object-fit: cover;
     border-radius: 6px;
     flex-shrink: 0;
   }

   .bottle-info {
     flex-grow: 1;
     text-align: left;
   }

   .bottle-info strong {
     color: #f4d89a;
     margin-right: 6px;
   }

   .bottle-info div {
     margin-bottom: 3px;
   }

   /* MODAL STYLES */
   #bottleModal {
     display: none;
     position: fixed;
     top: 0;
     left: 0;
     width: 100vw;
     height: 100vh;
     background-color: rgba(0, 0, 0, 0.85);
     z-index: 9999;
     justify-content: center;
     align-items: center;
     flex-direction: column;
     padding: 20px;
   }

   #bottleModalContent {
     background: #1b1b1b;
     padding: 20px;
     border-radius: 10px;
     max-width: 400px;
     max-height: 80vh;
     overflow-y: auto;
     color: white;
     box-shadow: 0 0 20px #f4d89a;
   }

   #bottleModalContent img {
     width: 100%;
     border-radius: 6px;
     margin-bottom: 12px;
   }

   #bottleModal .closeBtn {
     background: #a6794a;
     color: white;
     padding: 10px 20px;
     border: none;
     border-radius: 5px;
     margin-bottom: 10px;
     cursor: pointer;
     font-family: "Courier New", monospace;
   }

   @media (max-width: 600px) {
     .bottle-card {
       flex-direction: column;
       align-items: flex-start;
     }
     .bottle-card img {
       width: 100%;
       height: auto;
     }
   }
 </style>
</head>
<body>
   <header>
    <button class="return-button" onclick="location.href='/'">Return to Homepage</button>
    <div>The Tipsy Bunghole Bottles</div>
    <button id="rouletteBtn">Bottle Roulette ðŸŽ²</button>
  </header>

  <div class="filters">
    <label for="filterName">Name:</label>
    <input type="text" id="filterName" oninput="applyFilters()" placeholder="e.g., Whiskey" />
    <label for="filterType">Type:</label>
    <input type="text" id="filterType" oninput="applyFilters()" placeholder="e.g., Bourbon" />
    <label for="filterOrigin">Origin:</label>
    <input type="text" id="filterOrigin" oninput="applyFilters()" placeholder="e.g., Scotland" />
  </div>

  <button class="collapsible">Admin: Add Bottle</button>
  <div class="content">
    <form id="addBottleForm">
      <input type="text" id="name" placeholder="Name" required />
      <input type="text" id="type" placeholder="Type" />
      <input type="text" id="origin" placeholder="Origin" />
      <input type="url" id="image" placeholder="Image URL" />
      <button type="submit">Add Bottle</button>
    </form>
  </div>

  <main class="bottle-grid" id="bottleGrid"></main>

  <!-- Modal -->
  <div id="bottleModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <button class="closeBtn" onclick="closeModal()">Close</button>
    <div id="bottleModalContent">
      <!-- Content dynamically inserted -->
    </div>
  </div>

  <script>
    const bottles = [];

    document.querySelector('.collapsible').addEventListener('click', function () {
      this.classList.toggle('active');
      const content = this.nextElementSibling;
      content.style.display = content.style.display === 'block' ? 'none' : 'block';
    });

    document.getElementById('addBottleForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const name = document.getElementById('name').value.trim();
      const type = document.getElementById('type').value.trim();
      const origin = document.getElementById('origin').value.trim();
      const image = document.getElementById('image').value.trim();

      bottles.push({ name, type, origin, image });
      renderBottles();
      this.reset();
    });

    function renderBottles(filtered = bottles) {
      const grid = document.getElementById('bottleGrid');
      grid.innerHTML = '';

      filtered.forEach((bottle, index) => {
        const card = document.createElement('div');
        card.className = 'bottle-card';
        card.tabIndex = 0;
        card.setAttribute('role', 'button');
        card.setAttribute('aria-label', `View details for ${bottle.name}`);
        card.addEventListener('click', () => openModal(bottle));
        card.addEventListener('keypress', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            openModal(bottle);
            e.preventDefault();
          }
        });

        const img = bottle.image
          ? `<img src="${bottle.image}" alt="${bottle.name} image" />`
          : `<div class="placeholder-svg">ðŸ“·</div>`;

        card.innerHTML = `
          ${img}
          <div class="bottle-info">
            <div><strong>Name:</strong> ${bottle.name}</div>
            <div><strong>Type:</strong> ${bottle.type}</div>
            <div><strong>Origin:</strong> ${bottle.origin}</div>
          </div>
        `;

        grid.appendChild(card);
      });
    }

    function applyFilters() {
      const nameFilter = document.getElementById('filterName').value.toLowerCase();
      const typeFilter = document.getElementById('filterType').value.toLowerCase();
      const originFilter = document.getElementById('filterOrigin').value.toLowerCase();

      const filtered = bottles.filter(bottle =>
        bottle.name.toLowerCase().includes(nameFilter) &&
        bottle.type.toLowerCase().includes(typeFilter) &&
        bottle.origin.toLowerCase().includes(originFilter)
      );

      renderBottles(filtered);
    }

    function openModal(bottle) {
      const modal = document.getElementById('bottleModal');
      const content = document.getElementById('bottleModalContent');
      content.innerHTML = `
        ${bottle.image ? `<img src="${bottle.image}" alt="${bottle.name} image" />` : ''}
        <h2 id="modalTitle">${bottle.name}</h2>
        <p><strong>Type:</strong> ${bottle.type}</p>
        <p><strong>Origin:</strong> ${bottle.origin}</p>
      `;
      modal.style.display = 'flex';

      // Trap focus
      modal.focus();
      document.addEventListener('keydown', handleModalKey);
    }

    function closeModal() {
      document.getElementById('bottleModal').style.display = 'none';
      document.removeEventListener('keydown', handleModalKey);
    }

    function handleModalKey(e) {
      if (e.key === 'Escape') closeModal();
    }

    document.getElementById('rouletteBtn').addEventListener('click', () => {
      if (bottles.length === 0) return;
      const randomBottle = bottles[Math.floor(Math.random() * bottles.length)];
      openModal(randomBottle);
    });
  </script>
 </body>
</html>


